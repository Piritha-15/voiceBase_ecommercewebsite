{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECT1\\\\frontend\\\\src\\\\context\\\\SpeechCoordinationContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpeechCoordinationContext = /*#__PURE__*/createContext();\nexport const useSpeechCoordination = () => {\n  _s();\n  const context = useContext(SpeechCoordinationContext);\n  if (!context) {\n    throw new Error('useSpeechCoordination must be used within a SpeechCoordinationProvider');\n  }\n  return context;\n};\n_s(useSpeechCoordination, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const SpeechCoordinationProvider = ({\n  children\n}) => {\n  _s2();\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [activeRecognition, setActiveRecognition] = useState(null);\n  const [recognitionState, setRecognitionState] = useState('stopped'); // 'stopped', 'starting', 'running', 'stopping'\n\n  // Coordinated speech function that pauses voice recognition\n  const coordinatedSpeak = useCallback((text, options = {}) => {\n    if (!text || text.trim() === '') {\n      console.log('âŒ Empty text, skipping speech');\n      return Promise.resolve();\n    }\n    if (!('speechSynthesis' in window)) {\n      console.error('âŒ Speech synthesis not supported');\n      return Promise.reject(new Error('Speech synthesis not supported'));\n    }\n    return new Promise((resolve, reject) => {\n      console.log('ðŸ”Š COORDINATED SPEECH:', text);\n\n      // PAUSE voice recognition during speech\n      if (isListening && activeRecognition) {\n        console.log('â¸ï¸ Pausing voice recognition for speech...');\n        try {\n          activeRecognition.stop();\n          setIsListening(false);\n        } catch (error) {\n          console.log('Note: Could not pause recognition:', error.message);\n        }\n      }\n      setIsSpeaking(true);\n      try {\n        // Cancel any ongoing speech\n        window.speechSynthesis.cancel();\n\n        // Wait for cancellation to complete\n        setTimeout(() => {\n          const utterance = new SpeechSynthesisUtterance(text);\n          utterance.rate = options.rate || 0.9;\n          utterance.pitch = options.pitch || 1.0;\n          utterance.volume = options.volume || 1.0;\n          utterance.lang = options.lang || 'en-US';\n\n          // Get best available voice\n          const voices = window.speechSynthesis.getVoices();\n          if (voices.length > 0) {\n            const englishVoice = voices.find(voice => voice.lang.startsWith('en')) || voices[0];\n            utterance.voice = englishVoice;\n            console.log('ðŸŽ¤ Using coordinated voice:', englishVoice.name);\n          }\n          utterance.onstart = () => {\n            console.log('âœ… COORDINATED SPEECH STARTED');\n          };\n          utterance.onend = () => {\n            console.log('âœ… COORDINATED SPEECH COMPLETED');\n            setIsSpeaking(false);\n\n            // RESUME voice recognition after speech completes\n            if (activeRecognition) {\n              console.log('â–¶ï¸ Resuming voice recognition after coordinated speech...');\n              setTimeout(() => {\n                if (activeRecognition) {\n                  try {\n                    activeRecognition.start();\n                    setIsListening(true);\n                  } catch (error) {\n                    console.log('Note: Could not resume recognition:', error.message);\n                  }\n                }\n              }, 300); // Shorter delay for better responsiveness\n            }\n            resolve();\n          };\n          utterance.onerror = event => {\n            console.error('âŒ COORDINATED SPEECH ERROR:', event.error);\n            setIsSpeaking(false);\n\n            // Resume voice recognition even on error\n            if (activeRecognition) {\n              setTimeout(() => {\n                if (activeRecognition) {\n                  try {\n                    activeRecognition.start();\n                    setIsListening(true);\n                  } catch (error) {\n                    console.log('Note: Could not resume recognition after error:', error.message);\n                  }\n                }\n              }, 300);\n            }\n            reject(new Error(event.error));\n          };\n          console.log('ðŸ”Š STARTING COORDINATED SPEECH...');\n          window.speechSynthesis.speak(utterance);\n        }, 100);\n      } catch (error) {\n        console.error('âŒ COORDINATED SPEECH EXCEPTION:', error);\n        setIsSpeaking(false);\n        reject(error);\n      }\n    });\n  }, [isListening, activeRecognition]);\n\n  // Register voice recognition instance\n  const registerRecognition = useCallback(recognition => {\n    console.log('ðŸ“ Registering voice recognition for coordination');\n    setActiveRecognition(recognition);\n  }, []);\n\n  // Unregister voice recognition instance\n  const unregisterRecognition = useCallback(() => {\n    console.log('ðŸ“ Unregistering voice recognition');\n    setActiveRecognition(null);\n    setIsListening(false);\n  }, []);\n\n  // Set listening state\n  const setListeningState = useCallback(listening => {\n    setIsListening(listening);\n  }, []);\n  const value = {\n    isSpeaking,\n    isListening,\n    coordinatedSpeak,\n    registerRecognition,\n    unregisterRecognition,\n    setListeningState\n  };\n  return /*#__PURE__*/_jsxDEV(SpeechCoordinationContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n};\n_s2(SpeechCoordinationProvider, \"Dt/XMz9HiiEblzSJDwbqVRP6MGU=\");\n_c = SpeechCoordinationProvider;\nvar _c;\n$RefreshReg$(_c, \"SpeechCoordinationProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useCallback","jsxDEV","_jsxDEV","SpeechCoordinationContext","useSpeechCoordination","_s","context","Error","SpeechCoordinationProvider","children","_s2","isSpeaking","setIsSpeaking","isListening","setIsListening","activeRecognition","setActiveRecognition","recognitionState","setRecognitionState","coordinatedSpeak","text","options","trim","console","log","Promise","resolve","window","error","reject","stop","message","speechSynthesis","cancel","setTimeout","utterance","SpeechSynthesisUtterance","rate","pitch","volume","lang","voices","getVoices","length","englishVoice","find","voice","startsWith","name","onstart","onend","start","onerror","event","speak","registerRecognition","recognition","unregisterRecognition","setListeningState","listening","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/PROJECT1/frontend/src/context/SpeechCoordinationContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useCallback } from 'react';\r\n\r\nconst SpeechCoordinationContext = createContext();\r\n\r\nexport const useSpeechCoordination = () => {\r\n  const context = useContext(SpeechCoordinationContext);\r\n  if (!context) {\r\n    throw new Error('useSpeechCoordination must be used within a SpeechCoordinationProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const SpeechCoordinationProvider = ({ children }) => {\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [activeRecognition, setActiveRecognition] = useState(null);\r\n  const [recognitionState, setRecognitionState] = useState('stopped'); // 'stopped', 'starting', 'running', 'stopping'\r\n\r\n  // Coordinated speech function that pauses voice recognition\r\n  const coordinatedSpeak = useCallback((text, options = {}) => {\r\n    if (!text || text.trim() === '') {\r\n      console.log('âŒ Empty text, skipping speech');\r\n      return Promise.resolve();\r\n    }\r\n\r\n    if (!('speechSynthesis' in window)) {\r\n      console.error('âŒ Speech synthesis not supported');\r\n      return Promise.reject(new Error('Speech synthesis not supported'));\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      console.log('ðŸ”Š COORDINATED SPEECH:', text);\r\n\r\n      // PAUSE voice recognition during speech\r\n      if (isListening && activeRecognition) {\r\n        console.log('â¸ï¸ Pausing voice recognition for speech...');\r\n        try {\r\n          activeRecognition.stop();\r\n          setIsListening(false);\r\n        } catch (error) {\r\n          console.log('Note: Could not pause recognition:', error.message);\r\n        }\r\n      }\r\n\r\n      setIsSpeaking(true);\r\n\r\n      try {\r\n        // Cancel any ongoing speech\r\n        window.speechSynthesis.cancel();\r\n        \r\n        // Wait for cancellation to complete\r\n        setTimeout(() => {\r\n          const utterance = new SpeechSynthesisUtterance(text);\r\n          utterance.rate = options.rate || 0.9;\r\n          utterance.pitch = options.pitch || 1.0;\r\n          utterance.volume = options.volume || 1.0;\r\n          utterance.lang = options.lang || 'en-US';\r\n          \r\n          // Get best available voice\r\n          const voices = window.speechSynthesis.getVoices();\r\n          if (voices.length > 0) {\r\n            const englishVoice = voices.find(voice => voice.lang.startsWith('en')) || voices[0];\r\n            utterance.voice = englishVoice;\r\n            console.log('ðŸŽ¤ Using coordinated voice:', englishVoice.name);\r\n          }\r\n\r\n          utterance.onstart = () => {\r\n            console.log('âœ… COORDINATED SPEECH STARTED');\r\n          };\r\n          \r\n          utterance.onend = () => {\r\n            console.log('âœ… COORDINATED SPEECH COMPLETED');\r\n            setIsSpeaking(false);\r\n            \r\n            // RESUME voice recognition after speech completes\r\n            if (activeRecognition) {\r\n              console.log('â–¶ï¸ Resuming voice recognition after coordinated speech...');\r\n              setTimeout(() => {\r\n                if (activeRecognition) {\r\n                  try {\r\n                    activeRecognition.start();\r\n                    setIsListening(true);\r\n                  } catch (error) {\r\n                    console.log('Note: Could not resume recognition:', error.message);\r\n                  }\r\n                }\r\n              }, 300); // Shorter delay for better responsiveness\r\n            }\r\n            \r\n            resolve();\r\n          };\r\n          \r\n          utterance.onerror = (event) => {\r\n            console.error('âŒ COORDINATED SPEECH ERROR:', event.error);\r\n            setIsSpeaking(false);\r\n            \r\n            // Resume voice recognition even on error\r\n            if (activeRecognition) {\r\n              setTimeout(() => {\r\n                if (activeRecognition) {\r\n                  try {\r\n                    activeRecognition.start();\r\n                    setIsListening(true);\r\n                  } catch (error) {\r\n                    console.log('Note: Could not resume recognition after error:', error.message);\r\n                  }\r\n                }\r\n              }, 300);\r\n            }\r\n            \r\n            reject(new Error(event.error));\r\n          };\r\n\r\n          console.log('ðŸ”Š STARTING COORDINATED SPEECH...');\r\n          window.speechSynthesis.speak(utterance);\r\n          \r\n        }, 100);\r\n        \r\n      } catch (error) {\r\n        console.error('âŒ COORDINATED SPEECH EXCEPTION:', error);\r\n        setIsSpeaking(false);\r\n        reject(error);\r\n      }\r\n    });\r\n  }, [isListening, activeRecognition]);\r\n\r\n  // Register voice recognition instance\r\n  const registerRecognition = useCallback((recognition) => {\r\n    console.log('ðŸ“ Registering voice recognition for coordination');\r\n    setActiveRecognition(recognition);\r\n  }, []);\r\n\r\n  // Unregister voice recognition instance\r\n  const unregisterRecognition = useCallback(() => {\r\n    console.log('ðŸ“ Unregistering voice recognition');\r\n    setActiveRecognition(null);\r\n    setIsListening(false);\r\n  }, []);\r\n\r\n  // Set listening state\r\n  const setListeningState = useCallback((listening) => {\r\n    setIsListening(listening);\r\n  }, []);\r\n\r\n  const value = {\r\n    isSpeaking,\r\n    isListening,\r\n    coordinatedSpeak,\r\n    registerRecognition,\r\n    unregisterRecognition,\r\n    setListeningState\r\n  };\r\n\r\n  return (\r\n    <SpeechCoordinationContext.Provider value={value}>\r\n      {children}\r\n    </SpeechCoordinationContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}